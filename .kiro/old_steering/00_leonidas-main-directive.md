# Leonidas Master Directive - Complete Project Navigation Map

## ğŸ¯ **DIRETIVA MESTRE DO PROJETO LEONIDAS**

Este Ã© o steering rule principal e mapa completo de navegaÃ§Ã£o que direciona todo o desenvolvimento do projeto Leonidas. Ã‰ o ponto de entrada Ãºnico para entender a arquitetura, objetivos, recursos disponÃ­veis e direcionamento estratÃ©gico do projeto.

---

## ğŸ“Š **VISÃƒO EXECUTIVA DO PROJETO**

### **ğŸ¯ MissÃ£o Central**
Leonidas Ã© um **sistema de IA colaborativa em tempo real** projetado para funcionar como um **parceiro tÃ©cnico sÃªnior** que trabalha lado a lado com desenvolvedores, arquitetando, especificando e construindo software complexo.

### **ğŸ† Proposta de Valor Ãšnica**
- **ColaboraÃ§Ã£o TÃ©cnica Real-time**: ConversaÃ§Ã£o bidirecional com Ã¡udio e vÃ­deo
- **AnÃ¡lise Contextual Inteligente**: PercepÃ§Ã£o visual do ambiente de desenvolvimento  
- **Arquitetura Cognitiva Dual**: Sistema 1 (reativo) + Sistema 2 (analÃ­tico)
- **EspecializaÃ§Ã£o TÃ©cnica**: Foco em arquitetura de software e desenvolvimento

### **ğŸ“ˆ Status Atual: FASE 1 COMPLETA â†’ FASE 2 PRONTA PARA INICIAR**
- âœ… **Sistema de conversaÃ§Ã£o real-time funcional**
- âœ… **DetecÃ§Ã£o de eventos e tratamento de interrupÃ§Ãµes**
- âœ… **IntegraÃ§Ã£o Gemini Live API estÃ¡vel**
- ğŸ”„ **EvoluÃ§Ã£o arquitetural: de "comentarista" para "colaborador"**
- ğŸ“‹ **PrÃ³ximo: Sistema cognitivo avanÃ§ado e memÃ³ria persistente**

---

## ğŸ—ï¸ **ARQUITETURA COMPLETA DO PROJETO**

### **ğŸ“ Estrutura de DiretÃ³rios (MAPA COMPLETO)**

```
genai-processors/                    # ğŸ  ROOT PROJECT
â”œâ”€â”€ leonidas/                        # ğŸ¯ FOCO PRINCIPAL - PROJETO LEONIDAS
â”‚   â”œâ”€â”€ leonidas.py                  # ğŸš€ IMPLEMENTAÃ‡ÃƒO PRINCIPAL (933 linhas)
â”‚   â”œâ”€â”€ leonidas_cli.py              # ğŸ–¥ï¸ Interface CLI robusta
â”‚   â”œâ”€â”€ README.md                    # ğŸ“– DocumentaÃ§Ã£o completa v2
â”‚   â”œâ”€â”€ REQUIREMENTS.md              # ğŸ“‹ EspecificaÃ§Ãµes detalhadas
â”‚   â””â”€â”€ tests/                       # ğŸ§ª Testes automatizados
â”œâ”€â”€ genai_processors/                # ğŸ“š BIBLIOTECA CORE (20+ processadores)
â”‚   â”œâ”€â”€ core/                        # ğŸ”§ Processadores fundamentais
â”‚   â”œâ”€â”€ contrib/                     # ğŸ¤ ContribuiÃ§Ãµes da comunidade
â”‚   â””â”€â”€ examples/                    # ğŸ’¡ Exemplos de uso
â”œâ”€â”€ .kiro/steering/                  # ğŸ§­ STEERING RULES (16 documentos)
â”œâ”€â”€ examples/                        # ğŸ¨ Exemplos prÃ¡ticos
â”œâ”€â”€ resource/                        # ğŸ“š Recursos e documentaÃ§Ã£o
â”œâ”€â”€ logs/                           # ğŸ“Š Logs de sessÃ£o
â”œâ”€â”€ README.md                        # ğŸ“– DocumentaÃ§Ã£o principal do projeto
â”œâ”€â”€ LEONIDAS_EXECUTIVE_SUMMARY.md   # ğŸ“Š Resumo executivo
â”œâ”€â”€ pyproject.toml                   # âš™ï¸ ConfiguraÃ§Ã£o do projeto Python
â””â”€â”€ CONTRIBUTING.md                  # ğŸ¤ Guia de contribuiÃ§Ã£o
```

### **ğŸ¯ FOCO ABSOLUTO: PASTA `leonidas/`**

**ATENÃ‡ÃƒO CRÃTICA**: Todo desenvolvimento deve ser focado na pasta `leonidas/`. Esta contÃ©m:

- **`leonidas/leonidas.py`** (933 linhas) - ImplementaÃ§Ã£o principal com arquitetura modular
- **`leonidas/leonidas_cli.py`** - Interface CLI completa e robusta  
- **`leonidas/README.md`** - DocumentaÃ§Ã£o abrangente da v2
- **`leonidas/REQUIREMENTS.md`** - EspecificaÃ§Ãµes tÃ©cnicas detalhadas (5 seÃ§Ãµes principais)
- **`leonidas/tests/`** - Suite de testes automatizados

---

## ğŸ§­ **MAPA COMPLETO DE STEERING RULES**

### **ğŸ“š INVENTÃRIO COMPLETO (16 STEERING RULES)**

#### **ğŸ¥‡ TIER 1 - ESSENCIAIS PARA LEONIDAS (PRIORIDADE MÃXIMA)**
1. **`.kiro/steering/00_leonidas-main-directive.md`** - ğŸ¯ **ESTE DOCUMENTO** - Diretiva mestre
2. **`.kiro/steering/gemini-models-complete-reference.md`** - ğŸ“– ReferÃªncia completa de modelos Gemini
3. **`.kiro/steering/gemini-live-api-implementation.md`** - ğŸ”Œ ImplementaÃ§Ã£o da API Live
4. **`.kiro/steering/gemini-function-scheduling-patterns.md`** - âš™ï¸ Function calling avanÃ§ado

#### **ğŸ¥ˆ TIER 2 - FUNCIONALIDADES AVANÃ‡ADAS (ALTA PRIORIDADE)**
5. **`.kiro/steering/gemini-performance-optimization.md`** - âš¡ OtimizaÃ§Ã£o de performance
6. **`.kiro/steering/gemini-state-machine-patterns.md`** - ğŸ”„ Gerenciamento de estado
7. **`.kiro/steering/gemini-context-transcription-management.md`** - ğŸ’­ Contexto e transcriÃ§Ã£o
8. **`.kiro/steering/gemini-audio-processing-pipeline.md`** - ğŸµ Processamento de Ã¡udio
9. **`.kiro/steering/gemini-realtime-systems-complete.md`** - â±ï¸ Sistemas em tempo real

#### **ğŸ¥‰ TIER 3 - BIBLIOTECA GENAI-PROCESSORS (USAR SELETIVAMENTE)**
10. **`.kiro/steering/genai-processors-complete-reference.md`** - ğŸ“š ReferÃªncia completa da biblioteca
11. **`.kiro/steering/genai-processors-architecture.md`** - ğŸ—ï¸ Arquitetura da biblioteca
12. **`.kiro/steering/genai-processors-development.md`** - ğŸ‘¨â€ğŸ’» PadrÃµes de desenvolvimento
13. **`.kiro/steering/genai-processors-workflows.md`** - ğŸ”„ Workflows complexos
14. **`.kiro/steering/genai-processors-integration.md`** - ğŸ”— IntegraÃ§Ã£o externa
15. **`.kiro/steering/genai-processors-caching.md`** - ğŸ’¾ Sistema de cache
16. **`.kiro/steering/genai-processors-debugging.md`** - ğŸ› Debug e observabilidade

### **ğŸ¯ ESTRATÃ‰GIA DE USO DOS STEERING RULES**

#### **Para Desenvolvimento Principal (Leonidas):**
- **SEMPRE** consultar Tier 1 primeiro
- **FREQUENTEMENTE** usar Tier 2 para funcionalidades especÃ­ficas
- **SELETIVAMENTE** consultar Tier 3 apenas quando necessÃ¡rio para genai-processors

#### **Para ResoluÃ§Ã£o de Problemas:**
- **Performance**: `.kiro/steering/gemini-performance-optimization.md`
- **Bugs**: `.kiro/steering/genai-processors-debugging.md`
- **Estado**: `.kiro/steering/gemini-state-machine-patterns.md`
- **Ãudio**: `.kiro/steering/gemini-audio-processing-pipeline.md`

---

## ğŸš€ **ROADMAP DETALHADO E PRIORIDADES**

### **ğŸ“‹ FASE 1: FUNDAÃ‡ÃƒO** âœ… **COMPLETA**
- âœ… Sistema bÃ¡sico de conversaÃ§Ã£o em tempo real
- âœ… DetecÃ§Ã£o de eventos e tratamento de interrupÃ§Ãµes
- âœ… ImplementaÃ§Ã£o de mÃ¡quina de estados
- âœ… Suporte multi-interface (CLI, WebSocket)
- âœ… Prompts em portuguÃªs brasileiro

### **ğŸ”„ FASE 2: INTELIGÃŠNCIA APRIMORADA** ğŸ“ **ATUAL - PRONTA PARA INICIAR**
**DuraÃ§Ã£o**: 2-3 semanas | **Status**: Pronto para desenvolvimento

#### **Semana 1: OtimizaÃ§Ã£o de Modelos**
- [ ] MigraÃ§Ã£o para `gemini-2.0-flash-live-001` (estabilidade)
- [ ] OtimizaÃ§Ã£o de prompts para colaboraÃ§Ã£o tÃ©cnica
- [ ] Aprimoramento de declaraÃ§Ãµes de funÃ§Ã£o
- [ ] ImplementaÃ§Ã£o de monitoramento bÃ¡sico

#### **Semana 2: Sistema Cognitivo**
- [ ] ImplementaÃ§Ã£o do CognitiveAnalyzer (Sistema 2)
- [ ] Pipeline de processamento paralelo
- [ ] LÃ³gica de intervenÃ§Ã£o e thresholds
- [ ] IntegraÃ§Ã£o de insights cognitivos

#### **Semana 3: Gerenciamento de SessÃ£o**
- [ ] Logger estruturado de sessÃµes
- [ ] Gerenciamento de estado de conversaÃ§Ã£o
- [ ] GeraÃ§Ã£o de resumos de sessÃ£o
- [ ] MemÃ³ria bÃ¡sica entre turnos

### **ğŸ“ˆ FASE 3: PRONTIDÃƒO PARA PRODUÃ‡ÃƒO** ğŸ”® **PLANEJADA**
**DuraÃ§Ã£o**: 3-4 semanas | **Prioridade**: MÃ©dia

- [ ] Sistema de memÃ³ria persistente
- [ ] Monitoramento avanÃ§ado e alertas
- [ ] ConfiguraÃ§Ãµes especÃ­ficas por ambiente
- [ ] AutomaÃ§Ã£o de deployment

### **ğŸŒŸ FASE 4: RECURSOS AVANÃ‡ADOS** ğŸ”® **FUTURO**
**DuraÃ§Ã£o**: 4-6 semanas | **Prioridade**: Baixa

- [ ] Suporte a colaboraÃ§Ã£o multi-usuÃ¡rio
- [ ] IntegraÃ§Ã£o com ferramentas de desenvolvimento
- [ ] Capacidades de raciocÃ­nio avanÃ§ado
- [ ] Fine-tuning de modelos customizados

---

## âš™ï¸ **ESPECIFICAÃ‡Ã•ES TÃ‰CNICAS COMPLETAS**

### **ğŸ›ï¸ Stack TecnolÃ³gico Atual**
```yaml
Core Framework: genai-processors (biblioteca prÃ³pria)
Linguagem: Python 3.11+
Modelos IA:
  - Principal: gemini-live-2.5-flash-preview (conversaÃ§Ã£o)
  - Eventos: gemini-2.5-flash-lite-preview-06-17 (detecÃ§Ã£o)
  - Futuro: gemini-2.0-flash-live-001 (estabilidade)
Ãudio:
  - Entrada: 16kHz PCM 16-bit
  - SaÃ­da: 24kHz PCM 16-bit  
  - Voz: Kore (otimizada para portuguÃªs)
Linguagem: PortuguÃªs Brasileiro
Interfaces: CLI, WebSocket
Deployment: Desenvolvimento local
```

### **ğŸ—ï¸ Arquitetura Modular Atual**
```python
# Arquitetura implementada em leonidas.py
InputManager â†’ LeonidasOrchestrator â†’ OutputManager
     â†“              â†“                    â†“
  Camera/Mic    Gemini Live API      Speakers
  Video/Audio   Tool Execution       Rate Limit
  Future I/O    State Management     Future I/O
```

### **ğŸ”§ ConfiguraÃ§Ã£o PadrÃ£o Leonidas**
```python
LEONIDAS_CONFIG = types.LiveConnectConfig(
    response_modalities=["AUDIO"],
    system_instruction=LEONIDAS_SYSTEM_PROMPT,  # 5 seÃ§Ãµes principais
    speech_config={
        'language_code': 'pt-BR',
        'voice_config': {'prebuilt_voice_config': {'voice_name': 'Kore'}}
    },
    tools=LEONIDAS_TOOLS,  # 5 ferramentas avanÃ§adas
    media_resolution=types.MediaResolution.MEDIA_RESOLUTION_MEDIUM
)
```

### **ğŸ› ï¸ Sistema de Ferramentas AvanÃ§ado**
```python
LEONIDAS_TOOLS = [
    'think',           # ğŸ§  RaciocÃ­nio obrigatÃ³rio e verboso
    'change_state',    # ğŸ”„ Gerenciamento de estado prÃ³prio
    'get_context',     # ğŸ’­ Acesso Ã  memÃ³ria de conversaÃ§Ã£o
    'get_time',        # â° InformaÃ§Ãµes temporais
    'shutdown_system'  # ğŸ”Œ Desligamento controlado
]
```

---

## ğŸ“‹ **DIRETRIZES DE DESENVOLVIMENTO COMPLETAS**

### **ğŸ¯ PrincÃ­pios Fundamentais**
1. **FOCO ABSOLUTO**: Pasta `leonidas/` Ã© o centro de tudo
2. **COLABORADOR, NÃƒO ASSISTENTE**: Leonidas Ã© um parceiro tÃ©cnico sÃªnior
3. **PORTUGUÃŠS BRASILEIRO**: Toda implementaÃ§Ã£o e comunicaÃ§Ã£o
4. **MODULARIDADE**: Arquitetura InputManager â†’ Orchestrator â†’ OutputManager
5. **TEMPO REAL**: ConversaÃ§Ã£o fluida com interrupÃ§Ã£o graceful

### **ğŸ”§ PadrÃµes de CÃ³digo ObrigatÃ³rios**
```python
# 1. Logging estruturado
logger.info("OperaÃ§Ã£o", extra={'extra_data': structured_data})

# 2. Tratamento de erros graceful
try:
    result = await operation()
except Exception as e:
    logger.error(f"Erro: {e}")
    # RecuperaÃ§Ã£o graceful

# 3. FunÃ§Ã£o think obrigatÃ³ria
await self._handle_think(call_id, {
    'analysis': 'AnÃ¡lise detalhada...',
    'reasoning': 'Processo de raciocÃ­nio...',
    'plan': 'PrÃ³xima aÃ§Ã£o...'
})

# 4. Gerenciamento de estado
await self.state_machine.transition(
    AgentAction.START_PROCESSING,
    {'context': 'informaÃ§Ã£o relevante'}
)
```

### **ğŸš« O QUE EVITAR ABSOLUTAMENTE**
- âŒ NÃ£o trabalhar fora da pasta `leonidas/`
- âŒ NÃ£o usar modelos Gemini obsoletos
- âŒ NÃ£o implementar em inglÃªs
- âŒ NÃ£o ignorar os steering rules Tier 1
- âŒ NÃ£o sobrecarregar com todos os steering rules simultaneamente
- âŒ NÃ£o quebrar a arquitetura modular estabelecida
- âŒ **NÃƒO REINVENTAR A RODA**: NÃ£o implementar funcionalidades que jÃ¡ existem ou podem ser compostas com `genai-processors`. A biblioteca Ã© a fonte de verdade para padrÃµes de processamento de stream.

---

## ğŸ¯ **OBJETIVOS E MÃ‰TRICAS DE SUCESSO**

### **ğŸ“Š MÃ©tricas TÃ©cnicas**
- **LatÃªncia**: < 500ms para primeira resposta
- **Taxa de Sucesso**: > 95% de conversas completadas
- **Qualidade de Ãudio**: Taxa de interrupÃ§Ã£o < 10%
- **Disponibilidade**: > 99% uptime em produÃ§Ã£o

### **ğŸ‘¥ MÃ©tricas de ExperiÃªncia**
- **SatisfaÃ§Ã£o do UsuÃ¡rio**: > 4.5/5 em pesquisas
- **Produtividade**: ReduÃ§Ã£o de 30% no tempo de desenvolvimento
- **AdoÃ§Ã£o**: > 80% dos desenvolvedores usando regularmente
- **RetenÃ§Ã£o**: > 90% de usuÃ¡rios ativos mensalmente

### **ğŸ¯ Objetivos por Fase**

#### **Curto Prazo (Fase 2 - PrÃ³ximas 3 semanas):**
1. âœ… Finalizar sistema cognitivo avanÃ§ado
2. âœ… Implementar memÃ³ria de sessÃ£o
3. âœ… Otimizar performance para produÃ§Ã£o
4. âœ… Completar monitoramento bÃ¡sico

#### **MÃ©dio Prazo (Fase 3 - 1-2 meses):**
1. ğŸ”„ Deploy em ambiente de produÃ§Ã£o
2. ğŸ”„ Sistema de memÃ³ria persistente
3. ğŸ”„ Monitoramento avanÃ§ado e alertas
4. ğŸ”„ ConfiguraÃ§Ãµes por ambiente

#### **Longo Prazo (Fase 4 - 3-6 meses):**
1. ğŸ”® ColaboraÃ§Ã£o multi-usuÃ¡rio
2. ğŸ”® IntegraÃ§Ã£o com IDEs
3. ğŸ”® Capacidades de raciocÃ­nio avanÃ§ado
4. ğŸ”® Fine-tuning customizado

---

## ğŸ§­ **GUIA DE NAVEGAÃ‡ÃƒO E USO**

### **ğŸš€ Para Desenvolvimento Ativo**
1. **SEMPRE** consulte este documento primeiro
2. **IDENTIFIQUE** qual Tier de steering rules vocÃª precisa
3. **FOQUE** na pasta `leonidas/` exclusivamente
4. **SIGA** os padrÃµes de cÃ³digo estabelecidos
5. **TESTE** com mÃ©tricas de qualidade definidas

### **ğŸ› Para Debugging e Troubleshooting**
1. **Performance**: Use `.kiro/steering/gemini-performance-optimization.md`
2. **Bugs de Estado**: Use `.kiro/steering/gemini-state-machine-patterns.md`
3. **Problemas de Ãudio**: Use `.kiro/steering/gemini-audio-processing-pipeline.md`
4. **Erros de API**: Use `.kiro/steering/gemini-live-api-implementation.md`
5. **Logs**: Verifique pasta `logs/` com estrutura JSON

### **ğŸ“š Para Aprendizado e ReferÃªncia**
1. **Conceitos BÃ¡sicos**: `.kiro/steering/genai-processors-architecture.md`
2. **PadrÃµes AvanÃ§ados**: `.kiro/steering/genai-processors-workflows.md`
3. **IntegraÃ§Ã£o Externa**: `.kiro/steering/genai-processors-integration.md`
4. **Cache e Performance**: `.kiro/steering/genai-processors-caching.md`

### **ğŸ”„ Para EvoluÃ§Ã£o ContÃ­nua**
1. **Monitore** mÃ©tricas de sucesso definidas
2. **Atualize** este steering rule conforme evoluÃ§Ã£o
3. **Mantenha** foco na missÃ£o central
4. **Documente** decisÃµes arquiteturais importantes

---

## ğŸ’¡ **RECURSOS E FERRAMENTAS DISPONÃVEIS**

### **ğŸ“š Biblioteca GenAI Processors (20+ Processadores)**
- **Audio I/O**: PyAudioIn, PyAudioOut, RateLimitAudio
- **Modelos**: GenaiModel, LiveProcessor, OllamaModel
- **Texto**: MatchProcessor, JinjaTemplate, Preamble
- **Visual**: VideoIn, EventDetection
- **IntegraÃ§Ã£o**: GoogleDrive, GitHub, PdfProcessor

### **ğŸ¨ Exemplos PrÃ¡ticos DisponÃ­veis**
- **Real-time Live**: Audio-in/Audio-out com Google Search
- **Research Agent**: Agente de pesquisa com 3 sub-processadores
- **Live Commentary**: Agente de comentÃ¡rios com detecÃ§Ã£o de eventos

### **ğŸ”§ Ferramentas de Desenvolvimento**
- **CLI Robusta**: `leonidas/leonidas_cli.py` com argumentos completos
- **Logging Estruturado**: JSON logs com extra_data em `logs/`
- **Testes Automatizados**: Suite de testes em `leonidas/tests/`
- **Monitoramento**: MÃ©tricas de performance integradas

---

## ğŸ”„ **PROCESSO DE EVOLUÃ‡ÃƒO CONTÃNUA**

### **ğŸ“ˆ AtualizaÃ§Ãµes Regulares**
Este steering rule deve ser atualizado a cada milestone importante, mantendo sempre:
- âœ… Foco na pasta `leonidas/`
- âœ… PriorizaÃ§Ã£o das fases de desenvolvimento
- âœ… PadrÃµes especÃ­ficos do projeto
- âœ… IntegraÃ§Ã£o com Gemini Live API
- âœ… Desenvolvimento em portuguÃªs brasileiro

### **ğŸ¯ Indicadores de Necessidade de AtualizaÃ§Ã£o**
- ğŸ”„ ConclusÃ£o de fases do roadmap
- ğŸ”„ MudanÃ§as significativas na arquitetura
- ğŸ”„ Novos steering rules adicionados
- ğŸ”„ Feedback importante dos usuÃ¡rios
- ğŸ”„ MudanÃ§as nos modelos Gemini disponÃ­veis

---

## ğŸ† **CONCLUSÃƒO E CALL TO ACTION**

**Leonidas representa uma oportunidade Ãºnica** de criar um assistente de IA verdadeiramente colaborativo para desenvolvimento de software. Com uma **base sÃ³lida implementada** (Fase 1 completa) e um **roadmap claro** para evoluÃ§Ã£o, o projeto estÃ¡ posicionado para se tornar uma ferramenta essencial.

### **ğŸ¯ PRÃ“XIMOS PASSOS IMEDIATOS**
1. **INICIAR FASE 2**: Sistema cognitivo avanÃ§ado
2. **OTIMIZAR MODELOS**: MigraÃ§Ã£o para versÃµes estÃ¡veis
3. **IMPLEMENTAR MONITORAMENTO**: MÃ©tricas de produÃ§Ã£o
4. **PREPARAR DEPLOY**: Ambiente de produÃ§Ã£o

### **ğŸ“ LEMBRE-SE**
- ğŸ¯ **Este Ã© o steering MESTRE** - consulte primeiro, sempre
- ğŸ“ **Foco absoluto na pasta `leonidas/`**
- ğŸ¥‡ **Tier 1 steering rules sÃ£o essenciais**
- ğŸ‡§ğŸ‡· **PortuguÃªs brasileiro em tudo**
- ğŸ¤ **Leonidas Ã© um colaborador, nÃ£o assistente**

---

**ğŸš€ LEONIDAS V2 - Onde colaboraÃ§Ã£o IA encontra inteligÃªncia humana.**
